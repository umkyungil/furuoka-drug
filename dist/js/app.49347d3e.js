(function(e){function t(t){for(var a,i,c=t[0],o=t[1],s=t[2],l=0,f=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);d&&d(t);while(f.length)f.shift()();return u.push.apply(u,s||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(u.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={app:0},r={app:0},u=[];function c(e){return o.p+"js/"+({}[e]||e)+"."+{"chunk-63f8042d":"88c1a338","chunk-70110553":"55aa2d95","chunk-7a3daae6":"3fca6cd8"}[e]+".js"}function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n={"chunk-63f8042d":1,"chunk-70110553":1,"chunk-7a3daae6":1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-63f8042d":"d2a931ac","chunk-70110553":"97d09794","chunk-7a3daae6":"6edf739c"}[e]+".css",r=o.p+a,u=document.getElementsByTagName("link"),c=0;c<u.length;c++){var s=u[c],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===a||l===r))return t()}var f=document.getElementsByTagName("style");for(c=0;c<f.length;c++){s=f[c],l=s.getAttribute("data-href");if(l===a||l===r)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||r,u=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=a,delete i[e],d.parentNode.removeChild(d),n(u)},d.href=r;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){i[e]=0})));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var u=new Promise((function(t,n){a=r[e]=[t,n]}));t.push(a[2]=u);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=c(e);var f=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",f.name="ChunkLoadError",f.type=a,f.request=i,n[1](f)}r[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var f=0;f<s.length;f++)t(s[f]);var d=l;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"050e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nui-video-div",attrs:{id:e.userInfo.userId+"Div"},on:{click:function(t){return e.switchScreen()}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isMuteVideo(),expression:"isMuteVideo()"}],staticClass:"avatar avatar-name",attrs:{id:e.userInfo.userId+"avatar"}},[e._v("\n    "+e._s(e.userInfo.displayName)+"\n  ")]),n("video",{staticClass:"nui-video",attrs:{id:e.userInfo.userId,autoplay:""}}),n("div",{staticClass:"nui-video-footer"},[n("span",{staticClass:"user-name"},[e._v(e._s(e.userInfo.displayName))]),n("i",{staticClass:"iconfont",class:e.isMuteAudio()?"icon-maikefeng-jingyin-tianchongsvg":"icon-maikefeng-tianchong"})])])},i=[],r=(n("20d6"),{props:["userInfo"],data:function(){return{}},mounted:function(){var e=this;this.$nextTick((function(){setTimeout((function(){e.$emit("switchScreen",e.userInfo.userId)}),2e3)}))},methods:{isMuteVideo:function(){if(this.userInfo){if(!(Array.isArray(this.userInfo.streamConfigs)&&this.userInfo.streamConfigs.length>0))return!0;var e=this.userInfo.streamConfigs.findIndex((function(e){return"sophon_video_camera_large"==e.label&&e.muted}));if(e>-1)return!0;if(this.$store.state.data.isSwitchScreen&&document.getElementById("localVideo").getAttribute("subUserId")==this.userInfo.userId)return!0}return!1},isMuteAudio:function(){if(this.userInfo){if(!(Array.isArray(this.userInfo.streamConfigs)&&this.userInfo.streamConfigs.length>0))return!0;var e=this.userInfo.streamConfigs.findIndex((function(e){return"sophon_audio"==e.label&&e.muted}));if(e>-1)return!0}},switchScreen:function(){this.$emit("switchScreen",this.userInfo.userId)}}}),u=r,c=(n("2a9c"),n("2877")),o=Object(c["a"])(u,a,i,!1,null,null,null);t["default"]=o.exports},2323:function(e,t,n){var a={"./hvideo.vue":"050e","./userlist.vue":"e494"};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id="2323"},"2a9c":function(e,t,n){"use strict";n("9ff3")},"4cbe":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("20d6"),n("4917"),n("28a5"),n("3b2b"),n("0fb7"),n("450d");var a=n("f529"),i=n.n(a),r=n("d4ec"),u=n("bee2"),c=n("a065"),o=n("6297"),s=function(){function e(){Object(r["a"])(this,e)}return Object(u["a"])(e,null,[{key:"toast",value:function(e){i()(e)}},{key:"hCopy",value:function(e){if(e){try{var t=document.createRange(),n=document.getElementById(e);t.selectNodeContents(n);var a=window.getSelection();a.removeAllRanges(),a.addRange(t),document.execCommand("copy"),a.removeAllRanges()}catch(i){return console.log(i),!1}return!0}return!0}},{key:"inputCopy",value:function(e){try{var t=document.getElementById(e);return t.select(),document.execCommand("Copy"),!0}catch(n){return console.error(n),!1}}},{key:"getUrlParam",value:function(e){var t=window.location.href,n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=t.split("?");if(a.length>1){t="?"+a[1];var i=t.substr(1).match(n);return null!=i?decodeURIComponent(i[2]):null}return null}},{key:"exitRoom",value:function(){c["a"].instance.logout().then((function(){})).catch((function(e){})).then((function(){hvuex({isPublishScreen:!1,isPublish:!1,isPreview:c["a"].instance.isPreview}),hv.$router.push("/")}))}},{key:"startPreview",value:function(e){return new Promise((function(t,n){c["a"].instance.startPreview(e).then((function(){AppConfig.localStream=e.srcObject,hvuex({isPreview:!0}),t()})).catch((function(e){n(e),console.error("",e)}))}))}},{key:"showRemoteVideo",value:function(e){var t=c["a"].instance.getUserInfo(e.userId),n=document.getElementById(e.userId),a=document.getElementById("localVideo").getAttribute("subUserId");if(a)if(a==e.userId){n=document.getElementById("localVideo");var i=t.streamConfigs.findIndex((function(e){return"sophon_video_camera_large"==e.label&&e.subscribed}));if(-1==i)return c["a"].instance.subscribeLarge(e.userId).then((function(t){c["a"].instance.setDisplayRemoteVideo(e.userId,n,t)})),!1}else t.displayName.indexOf("_老师")>-1&&hvuex({switchUserId:e.userId});else t.displayName.indexOf("_老师")>-1&&hvuex({switchUserId:e.userId});c["a"].instance.setDisplayRemoteVideo(e.userId,n,e.code)}},{key:"onByeMessage",value:function(e){console.log(e);var t="";t=1==e||2==e?"10分钟体验时间已到":"同一个用户ID在其他端登录",hv.$alert(t,"",{confirmButtonText:"确定",callback:function(e){hv.$router.push("/")}})}},{key:"showErrorMsg",value:function(t){var n="";switch(t.errorCode){case 1e4:n+="设备未知错误";break;case 10001:n+="未找到音频设备";break;case 10002:n+="未找到视频设备";break;case 10003:n+="浏览器禁用音频设备";break;case 10004:n+="浏览器禁用视频设备";break;case 10005:n+="系统禁用音频设备";break;case 10006:n+="系统禁用视频设备";break;case 10010:n+="屏幕共享未知错误";break;case 10011:n+="屏幕共享被禁用",hvuex({isPublishScreen:!1});break;case 10012:n+="屏幕共享已取消",hvuex({isPublishScreen:!1}),o["a"].data.isSwitchScreen?o["a"].data.isPublishScreen?document.getElementById(c["a"].instance.userId).srcObject=c["a"].instance.screenStream:document.getElementById(c["a"].instance.userId).srcObject=AppConfig.localStream:o["a"].data.isPublishScreen?document.getElementById("localVideo").srcObject=c["a"].instance.screenStream:document.getElementById("localVideo").srcObject=AppConfig.localStream,document.getElementById(c["a"].instance.userId).srcObject==AppConfig.localStream&&(document.getElementById(c["a"].instance.userId).srcObject=null);break;case 10201:n+="自动播放失败";break;case 10300:n+="直播拉流失败，请重新拉流",document.getElementById("localVideo").srcObject=null;break;default:break}n?e.toast(n):e.toast(t)}}]),e}()},"56d7":function(e,t,n){"use strict";n.r(t);n("6ba6");var a=n("5efb"),i=(n("cd17"),n("ed3b")),r=(n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},c=[],o={data:function(){return{}},name:"app",components:{},created:function(){}},s=o,l=(n("5c0b"),n("2877")),f=Object(l["a"])(s,u,c,!1,null,null,null),d=f.exports,h=(n("96cf"),n("1da1")),m=n("8c4f"),v=n("2f62"),b={hvuex:function(e,t){var n=JSON.stringify(e.data),a=Object.assign(JSON.parse(n),t);e.data=a,hsetStore("hvuex",JSON.stringify(e.data))}};function p(e,t){e.state;var n=e.commit;n("hvuex",t)}var _={hvuex:p},y=n("6297");r["default"].use(v["a"]);var g=new v["a"].Store({state:y["a"],mutations:b,actions:_,plugins:[]}),k=g;r["default"].use(m["a"]);var I=[{path:"/",component:function(e){return n.e("chunk-63f8042d").then(function(){var t=[n("dc3f")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/login",component:function(e){return n.e("chunk-63f8042d").then(function(){var t=[n("dc3f")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/staff/:userId",component:function(e){return n.e("chunk-63f8042d").then(function(){var t=[n("dc3f")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/meet",component:function(e){return n.e("chunk-70110553").then(function(){var t=[n("7abe")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/err",component:function(e){return n.e("chunk-7a3daae6").then(function(){var t=[n("8cdb")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/*",component:function(e){return n.e("chunk-7a3daae6").then(function(){var t=[n("8cdb")];e.apply(null,t)}.bind(this)).catch(n.oe)}}],w=new m["a"]({hashbang:!0,history:!0,transitionOnLoad:!0,routes:I});function S(e){return P.apply(this,arguments)}function P(){return P=Object(h["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",k.dispatch("hvuex",t));case 1:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}hgetStore("hvuex")&&k.dispatch("hvuex",JSON.parse(hgetStore("hvuex"))),window.hvuex=S,w.beforeEach((function(e,t,n){n(),"/"==e.path&&"/"!=t.path&&setTimeout((function(){window.location.reload()}),200)}));var x=w;n("a481"),n("ac6a");function C(e){return e.charAt(0).toUpperCase()+e.slice(1)}var M=n("2323");M.keys().forEach((function(e){var t=M(e),n=C(e.replace(/^\.\//,"").replace(/\.\w+$/,""));r["default"].component(n,t.default||t)}));var A=n("a925"),L={en:{login:{title:"Furuokadrug",join:"Join",createRoom:"Create Room"},modal:{title:"Furuokadrug",header:"It's an empty room",body:"Please check your room number",goBack:"Return"},header:{classNum:"Room code",userName:"Name"},payment:{wechat:"Would you like to pay with WeChat?",alipay:"Would you like to pay with Alipay?"},footer:{mic:"Mic",camera:"Camera",off:"Leave",screenShare:"Screen share",wechat:"Wechat",alipay:"Alipay",leaveShadow:"Are you sure you want to quit?",cancel:"Cancel",goBack:"OK"}}},B={jp:{login:{title:"古岡ドラック",join:"参加",createRoom:"ルーム作成"},modal:{title:"古岡ドラック",header:"ルームが空いています",body:"ルームコードを確認してください",goBack:"戻る"},header:{classNum:"ルームコード",userName:"名前"},payment:{wechat:"Wechatで決済しますか",alipay:"Alipayで決済しますか"},footer:{mic:"静音",camera:"カメラ",off:"終了",screenShare:"画面共有",wechat:"Wechat",alipay:"Alipay",leaveShadow:"終了しますか",cancel:"キャンセル",goBack:"戻る"}}},R={cn:{login:{title:"古冈药业",join:"加入",createRoom:"创建会议"},modal:{title:"古冈药业",header:"这是一个空房间",body:"请查看会议代码",goBack:"结尾"},header:{classNum:"房间代码",userName:"姓名"},payment:{wechat:"你想用微信支付吗?",alipay:"您想用支付宝付款吗?"},footer:{mic:"静音",camera:"摄像头",off:"离开会议",screenShare:"共享屏幕",wechat:"微信",alipay:"支付宝",leaveShadow:"确定要结束会议吗？",cancel:"取消",goBack:"离开"}}},O=Object.assign(L,B,R),E=(n("202f"),n("0fb7"),n("450d"),n("f529")),j=n.n(E),N=(n("46a1"),n("e5f2")),U=n.n(N),V=(n("9e1f"),n("6ed5")),$=n.n(V),T=(n("be4f"),n("896a")),D=n.n(T),J=(n("bc1c"),n("4726")),W=n.n(J),K=(n("f92a"),n("d775")),F=n.n(K),q=(n("279e"),n("7d94")),G=n.n(q),H=(n("fa4c"),n("e360")),z=n.n(H),Q=(n("acb6"),n("c673")),X=n.n(Q),Y=(n("e3ea"),n("7bc3")),Z=n.n(Y),ee=(n("fd71"),n("a447")),te=n.n(ee),ne=(n("2f02"),n("fe11")),ae=n.n(ne),ie=(n("ed7b"),n("e1a5")),re=n.n(ie),ue=(n("bdc7"),n("aa2f")),ce=n.n(ue),oe=(n("de31"),n("c69e")),se=n.n(oe),le=(n("a769"),n("5cc3")),fe=n.n(le),de=(n("a673"),n("7b31")),he=n.n(de),me=(n("adec"),n("3d2d")),ve=n.n(me),be=(n("6762"),n("dd3d")),pe=n.n(be),_e=(n("a586"),n("7464")),ye=n.n(_e),ge=(n("28b2"),n("c7ad")),ke=n.n(ge),Ie=(n("b0ee"),n("d180")),we=n.n(Ie),Se=(n("a335"),n("c0bb")),Pe=n.n(Se),xe=(n("186a"),n("301f")),Ce=n.n(xe),Me=(n("96dc"),n("9cea")),Ae=n.n(Me),Le=(n("9c49"),n("6640")),Be=n.n(Le),Re=(n("d2ac"),n("95b0")),Oe=n.n(Re),Ee=(n("78a7"),n("33ca")),je=n.n(Ee),Ne=(n("b8e0"),n("a4c4")),Ue=n.n(Ne),Ve=(n("e2f3"),n("06f9")),$e=n.n(Ve),Te=(n("f3e4"),n("9dda")),De=n.n(Te),Je=(n("6b30"),n("c284")),We=n.n(Je),Ke=(n("f225"),n("89a9")),Fe=n.n(Ke),qe=(n("f4f9"),n("c2cc")),Ge=n.n(qe),He=(n("7a0f"),n("0f6c")),ze=n.n(He),Qe=(n("aaa5"),n("a578")),Xe=n.n(Qe),Ye=(n("b5c2"),n("20cf")),Ze=n.n(Ye),et=(n("915d"),n("e04d")),tt=n.n(et),nt=(n("5e32"),n("6721")),at=n.n(nt),it=(n("cbb5"),n("8bbc")),rt=n.n(it),ut=(n("e612"),n("dd87")),ct=n.n(ut),ot=(n("075a"),n("72aa")),st=n.n(ot),lt=(n("eca7"),n("3787")),ft=n.n(lt),dt=(n("425f"),n("4105")),ht=n.n(dt),mt=(n("b84d"),n("c216")),vt=n.n(mt),bt=(n("8f24"),n("76b9")),pt=n.n(bt),_t=(n("0c67"),n("299c")),yt=n.n(_t),gt=(n("06f1"),n("6ac9")),kt=n.n(gt),It=(n("4ffc"),n("946e")),wt=n.n(It),St=(n("d624"),n("3e9c")),Pt=n.n(St),xt=(n("826b"),n("c263")),Ct=n.n(xt),Mt=(n("5466"),n("ecdf")),At=n.n(Mt),Lt=(n("38a0"),n("ad41")),Bt=n.n(Lt),Rt=(n("ae26"),n("845f")),Ot=n.n(Rt),Et=(n("1951"),n("eedf")),jt=n.n(Et),Nt=(n("016f"),n("486c")),Ut=n.n(Nt),Vt=(n("6611"),n("e772")),$t=n.n(Vt),Tt=(n("1f1a"),n("4e4b")),Dt=n.n(Tt),Jt=(n("e960"),n("b35b")),Wt=n.n(Jt),Kt=(n("d4df"),n("7fc1")),Ft=n.n(Kt),qt=(n("c526"),n("1599")),Gt=n.n(qt),Ht=(n("560b"),n("dcdc")),zt=n.n(Ht),Qt=(n("3c52"),n("0d7b")),Xt=n.n(Qt),Yt=(n("fe07"),n("6ac5")),Zt=n.n(Yt),en=(n("b5d8"),n("f494")),tn=n.n(en),nn=(n("9d4c"),n("e450")),an=n.n(nn),rn=(n("10cb"),n("f3ad")),un=n.n(rn),cn=(n("34db"),n("3803")),on=n.n(cn),sn=(n("8bd8"),n("4cb2")),ln=n.n(sn),fn=(n("ce18"),n("f58e")),dn=n.n(fn),hn=(n("4ca3"),n("443e")),mn=n.n(hn),vn=(n("bd49"),n("18ff")),bn=n.n(vn),pn=(n("960d"),n("defb")),_n=n.n(pn),yn=(n("cb70"),n("b370")),gn=n.n(yn),kn=(n("3db2"),n("58b8")),In=n.n(kn),wn=(n("a7cc"),n("df33")),Sn=n.n(wn),Pn=(n("672e"),n("101e")),xn=n.n(Pn);r["default"].use(xn.a),r["default"].use(Sn.a),r["default"].use(In.a),r["default"].use(gn.a),r["default"].use(_n.a),r["default"].use(bn.a),r["default"].use(mn.a),r["default"].use(dn.a),r["default"].use(ln.a),r["default"].use(on.a),r["default"].use(un.a),r["default"].use(an.a),r["default"].use(tn.a),r["default"].use(Zt.a),r["default"].use(Xt.a),r["default"].use(zt.a),r["default"].use(Gt.a),r["default"].use(Ft.a),r["default"].use(Wt.a),r["default"].use(Dt.a),r["default"].use($t.a),r["default"].use(Ut.a),r["default"].use(jt.a),r["default"].use(Ot.a),r["default"].use(Bt.a),r["default"].use(At.a),r["default"].use(Ct.a),r["default"].use(Pt.a),r["default"].use(wt.a),r["default"].use(kt.a),r["default"].use(yt.a),r["default"].use(pt.a),r["default"].use(vt.a),r["default"].use(ht.a),r["default"].use(ft.a),r["default"].use(st.a),r["default"].use(ct.a),r["default"].use(rt.a),r["default"].use(at.a),r["default"].use(tt.a),r["default"].use(Ze.a),r["default"].use(Xe.a),r["default"].use(ze.a),r["default"].use(Ge.a),r["default"].use(Fe.a),r["default"].use(We.a),r["default"].use(De.a),r["default"].use($e.a),r["default"].use(Ue.a),r["default"].use(je.a),r["default"].use(Oe.a),r["default"].use(Be.a),r["default"].use(Ae.a),r["default"].use(Ce.a),r["default"].use(Pe.a),r["default"].use(we.a),r["default"].use(ke.a),r["default"].use(ye.a),r["default"].use(pe.a),r["default"].use(ve.a),r["default"].use(he.a),r["default"].use(fe.a),r["default"].use(se.a),r["default"].use(ce.a),r["default"].use(re.a),r["default"].use(ae.a),r["default"].use(te.a),r["default"].use(Z.a),r["default"].use(X.a),r["default"].use(z.a),r["default"].use(G.a),r["default"].use(F.a),r["default"].use(W.a),r["default"].use(D.a.directive),r["default"].prototype.$loading=D.a.service,r["default"].prototype.$msgbox=$.a,r["default"].prototype.$alert=$.a.alert,r["default"].prototype.$confirm=$.a.confirm,r["default"].prototype.$prompt=$.a.prompt,r["default"].prototype.$notify=U.a,r["default"].prototype.$message=j.a,r["default"].use(A["a"]);var Cn=new A["a"]({locale:"ja",fallbackLocale:"en",messages:O});r["default"].use(i["a"]),r["default"].use(a["a"]),k.state.config=AppConfig,r["default"].config.productionTip=!1,window.hv=new r["default"]({i18n:Cn,router:x,store:k,render:function(e){return e(d)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("e332")},"5c5e":function(e,t,n){},6297:function(e,t,n){"use strict";t["a"]={data:{version:"",classNum:"",userName:"",userId:null,role:null,client:null,isShowSetting:!1,isPublish:!1,isPreview:!1,isPublishScreen:!1,isSwitchScreen:!1,switchUserId:"",userList:[],supportInfo:{}},config:{}}},"8ea7":function(e,t,n){"use strict";n("5c5e")},"9ff3":function(e,t,n){},a065:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("ac6a"),n("96cf");var a=n("1da1"),i=n("d4ec"),r=n("bee2"),u=(n("6b54"),n("a481"),n("bc3a"),{appId:"eg9g0og6",appKey:"a867f99559de5d07d511c3b159c714ad"}),c=function(){function e(){Object(i["a"])(this,e)}return Object(r["a"])(e,null,[{key:"getAuthInfo",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){var r=a.GenerateAliRtcAuthInfo(t,n);r.userName=n,console.error(r),e(r)})));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"GenerateAliRtcAuthInfo",value:function(e){var t=u.appId,n=u.appKey,a=parseInt((new Date).getTime()/1e3+172800),i="AK-"+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})),r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})),c=sha256(t+n+e+r+i+a);return{appid:t,userid:r,timestamp:a,nonce:i,token:c,gslb:["https://rgslb.rtc.aliyuncs.com"],channel:e}}}]),e}(),o=function(){function e(){Object(i["a"])(this,e),this._clinet=new AliRtcEngine,this._handleEvents(),this._clinet.setChannelProfile(0),this._channel=null,this._userName=null,this._userId=null,this._callBack=null,this._isInCall=!1,this._isPublish=!1,this._isAudioOnlyMode=!1,this._autoPublish=!0,this._autoSubscribe=!0,this._isPreview=!1,this._isScreenSharePreview=!1,this._isMuteLocalMic=!1,this._isMuteLocalCamera=!1,this._currentRole=0,this._clinet.enableHighDefinitionPreview(!1),this._remoteStreamList=[],this._localScreenStream=null,this._localCameraStream=null,this._userMuteInfo={},this._clinet.setVideoProfile({width:640,height:480,frameRate:15,maxBitrate:1e5},1),this._clinet.setVideoProfile({width:1920,height:1080,frameRate:10,maxBitrate:15e5},2)}return Object(r["a"])(e,[{key:"isInCall",get:function(){return this._isInCall}},{key:"isPublish",get:function(){return this._isPublish}},{key:"userName",get:function(){return this._userName}},{key:"userId",get:function(){return this._userId}},{key:"channel",get:function(){return this._channel}},{key:"isPreview",get:function(){return this._isPreview}},{key:"isScreenSharePreview",get:function(){return this._isScreenSharePreview}},{key:"isMuteLocalCamera",get:function(){return this._isMuteLocalCamera}},{key:"isMuteLocalMic",get:function(){return this._isMuteLocalMic}},{key:"currentRole",get:function(){return this._currentRole}},{key:"screenStream",get:function(){return this._localScreenStream}},{key:"configLocalAudioPublish",set:function(e){this._clinet.configLocalAudioPublish=e}},{key:"configLocalCameraPublish",set:function(e){this._clinet.configLocalScreenPublish=e}},{key:"configLocalScreenPublish",set:function(e){this._clinet.configLocalScreenPublish=e}},{key:"getDevices",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._clinet.getDevices());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isSuppert",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._isSuppert());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"currentCamera",value:function(e){this._clinet.currentCamera={deviceId:e}}},{key:"currentAudioCapture",value:function(e){this._clinet.currentAudioCapture={deviceId:e}}},{key:"getUserInfo",value:function(e){return this._clinet.getUserInfo(e)}},{key:"registerCallBack",value:function(e){this._callBack=e}},{key:"setAutoPublishSubscribe",value:function(e,t){return!this._isInCall&&(this._autoPublish=e,this._autoSubscribe=t,!0)}},{key:"setAudioOnlyMode",value:function(e){return!this._isInCall&&(this._isAudioOnlyMode=e,!0)}},{key:"setClientRole",value:function(e){this._clinet.setClientRole(e),this.isInCall||(this._currentRole=e)}},{key:"login",value:function(e,t){var n=this;return new Promise((function(a,i){n._isSuppert().then((function(){n._getAuthInfo(e,t).then((function(e){n._clinet.joinChannel(e,t).then((function(t){n._isInCall=!0,n._executeAutoPublish().then((function(t){a(e.userid)})).catch((function(e){i(e)}))})).catch((function(e){i(e),console.error(e)}))}))}))}))}},{key:"enterSeat",value:function(){this._clinet.setClientRole(0)}},{key:"leavelSeat",value:function(){var e=this;this.unPublish().then((function(){e._clinet.setClientRole(1)})).catch((function(t){e._callBack("onLeaveSeatResult",t)}))}},{key:"startPreview",value:function(e){var t=this;return new Promise((function(n,a){t._clinet.startPreview(e).then((function(){t._isPreview=!0,setTimeout((function(){t._localCameraStream=e.srcObject,n()}),10)})).catch((function(e){a(e),console.error(e)}))}))}},{key:"startScreenSharePreview",value:function(e){var t=this;return new Promise((function(n,a){t._clinet.startScreenSharePreview(e).then((function(){t._isScreenSharePreview=!0,setTimeout((function(){t._localScreenStream=e.srcObject,n()}),10)})).catch((function(t){a(t),console.error(t,e)}))}))}},{key:"stopPreview",value:function(){var e=this;return new Promise((function(t,n){e._clinet.stopPreview().then((function(){e._isPreview=!1,t()})).catch((function(e){n(e),console.error(e)}))}))}},{key:"stopScreenSharePreview",value:function(){var e=this;return new Promise((function(t,n){e._isScreenSharePreview?e._clinet.stopScreenSharePreview().then((function(){e._isScreenSharePreview=!1,t()})).catch((function(e){n(e),console.error(e)})):t()}))}},{key:"publishOnlyAudio",value:function(){var e=this;return this._clinet.configLocalAudioPublish=!0,this._clinet.configLocalCameraPublish=!1,this._clinet.configLocalScreenPublish=!1,new Promise((function(t,n){e._publish().then((function(e){t(e)})).catch((function(e){console.error(e),n(e)}))}))}},{key:"publish",value:function(){var e=this;return this._clinet.configLocalAudioPublish=!0,this._clinet.configLocalCameraPublish=!0,new Promise((function(t,n){e._publish().then((function(e){t(e)})).catch((function(e){console.error(e),n(e)}))}))}},{key:"startPublishScreen",value:function(){var e=this;return new Promise((function(t,n){e._clinet.isSupportScreenShare()?(e._clinet.configLocalScreenPublish=!0,e._publish().then((function(e){t(e)})).catch((function(e){console.error(e),n(e)}))):n({type:null,code:null,errorCode:null,message:"screen sharing is not supported",data:{},description:""})}))}},{key:"stopPublishScreen",value:function(){var e=this;return new Promise((function(t,n){e._clinet.configLocalScreenPublish=!1,e._publish().then((function(e){t(e)})).catch((function(e){console.error(e),n(e)}))}))}},{key:"unPublish",value:function(){var e=this;return new Promise((function(t,n){e._clinet.configLocalAudioPublish=!1,e._clinet.configLocalCameraPublish=!1,e._clinet.configLocalScreenPublish=!1,e._publish().then((function(e){t(e)})).catch((function(e){console.error(e),n(e)}))}))}},{key:"configRemoteAudio",value:function(e,t){this._clinet.configRemoteAudio(e,t)}},{key:"configRemoteCameraTrack",value:function(e,t,n){this._clinet.configRemoteCameraTrack(e,t,n)}},{key:"configRemoteScreenTrack",value:function(e,t){this._clinet.configRemoteScreenTrack(e,t)}},{key:"subscribe",value:function(e){var t=this;return new Promise((function(n,a){var i=t._getPublishInfo(e);i.indexOf("sophon_video_screen_share")>-1?t.subscribeScreen(e).then((function(e){n(2)})):(t.configRemoteScreenTrack(e,!1),t.configRemoteCameraTrack(e,!1,!0),t._subscribe(e).then((function(e){n(1)})).catch((function(e){a(e),console.error(e)})))}))}},{key:"subscribeOnlyAudio",value:function(e){var t=this;return new Promise((function(n,a){t._clinet.configRemoteCameraTrack(e,!1,!1),t._clinet.configRemoteScreenTrack(e,!1),t._subscribe(e).then((function(e){n(1)})).catch((function(e){a(e),console.error(e)}))}))}},{key:"subscribeLarge",value:function(e){var t=this;return new Promise((function(n,a){var i=t._getPublishInfo(e);i.indexOf("sophon_video_screen_share")>-1?t.subscribeScreen(e).then((function(e){n(2)})):(t.configRemoteScreenTrack(e,!1),t.configRemoteCameraTrack(e,!0,!0),t._subscribe(e).then((function(e){n(1)})).catch((function(e){a(e),console.error(e)})))}))}},{key:"subscribeScreen",value:function(e){var t=this;return this.configRemoteScreenTrack(e,!0),new Promise((function(n,a){t._subscribe(e).then((function(e){n(e)})).catch((function(e){a(e),console.error(e)}))}))}},{key:"setDisplayLocalVideo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;1==t?e.srcObject=this._localCameraStream:this._localScreenStream}},{key:"setDisplayRemoteVideo",value:function(e,t,n){this._clinet.setDisplayRemoteVideo(e,t,n)}},{key:"muteLocalCamera",value:function(e){var t=this;return new Promise((function(n,a){t._clinet.muteLocalCamera(!t._isMuteLocalCamera)?(t._isMuteLocalCamera=!t._isMuteLocalCamera,t._isMuteLocalCamera?t.stopPreview().then((function(e){n()})).catch((function(e){a(e)})):t.startPreview(e).then((function(e){n()})).catch((function(e){a(e)}))):a()}))}},{key:"muteLocalCameraPublish",value:function(){var e=this;return new Promise((function(t,n){e._clinet.configLocalCameraPublish=!1,e._isMuteLocalCamera&&(e._clinet.configLocalCameraPublish=!0),e._publish().then((function(n){e._isMuteLocalCamera=!e._isMuteLocalCamera,e._isMuteLocalCamera?e.stopPreview().then((function(){t(!0)})):e.startPreview().then((function(){t(!0)}))})).catch((function(e){n(e)}))}))}},{key:"muteLocalMic",value:function(){return!!this._clinet.muteLocalMic(!this._isMuteLocalMic)&&(this._isMuteLocalMic=!this._isMuteLocalMic,!0)}},{key:"muteRemoteAudioPlaying",value:function(e,t){this._clinet.muteRemoteAudioPlaying(e,t)}},{key:"muteAllRemoteAudioPlaying",value:function(e){this._clinet.muteRemoteAudioPlaying(e)}},{key:"getRoomUserList",value:function(){return this._clinet.getUserList()}},{key:"logout",value:function(){var e=this;return new Promise((function(t,n){e._isScreenSharePreview&&e.stopScreenSharePreview(),e._isPreview?(e.configLocalScreenPublish=!1,e.stopPreview(),e._clinet.leaveChannel().then((function(n){e._isInCall=!1,e._isPublish=!1,e._isMuteLocalCamera=!1,e._isMuteLocalMic=!1,t()})).catch((function(e){console.error(e),n(e)}))):e._clinet.leaveChannel().then((function(n){e._isInCall=!1,e._isPublish=!1,e._isMuteLocalCamera=!1,e._isMuteLocalMic=!1,t()})).catch((function(e){console.error(e),n(e)}))}))}},{key:"_isSuppert",value:function(){var e=this;return new Promise((function(t,n){e._clinet.isSupport().then((function(e){t(e)})).catch((function(t){e._showErrorMsg(t),console.error(t),n(t)}))}))}},{key:"_executeAutoPublish",value:function(){var e=this;return new Promise((function(t,n){e._autoPublish?e._isAudioOnlyMode?e.publishOnlyAudio().then((function(e){t()})).catch((function(e){n(e),console.error(e)})):e.publish().then((function(e){t()})).catch((function(e){n(e),console.error(e)})):t()}))}},{key:"_executeAutoSubscribe",value:function(e){var t=this;this._autoSubscribe&&(this._isAudioOnlyMode?this.subscribeOnlyAudio(e.userId).then((function(n){t._callBack&&(console.warn("onSubscribeResult",{userId:e.userId,code:n}),t._callBack("onSubscribeResult",{userId:e.userId,code:n}))})):this.subscribe(e.userId).then((function(n){t._callBack&&(console.warn("onSubscribeResult",{userId:e.userId,code:n}),t._callBack("onSubscribeResult",{userId:e.userId,code:n}))})))}},{key:"_publish",value:function(){var e=this;return new Promise((function(t,n){e._clinet.publish().then((function(){e._clinet.configLocalAudioPublish||e._clinet.configLocalCameraPublish||e._clinet.configLocalScreenPublish?(e._isPublish=!0,t(!0)):(e._isPublish=!1,e._isMuteLocalCamera=!1,e._isMuteLocalMic=!1,t(!1))})).catch((function(e){n(e)}))}))}},{key:"_subscribe",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._clinet.subscribe(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_checkSubscribeState",value:function(e){var t=this.getUserInfo(e).streamConfigs,n=t.filter((function(e){return e.subscribed}));return n.length>0}},{key:"_getPublishInfo",value:function(e){console.warn("getPublishInfo:",e);var t=[],n=this.getUserInfo(e);return n&&n.streamConfigs&&(n=n.streamConfigs,n.forEach((function(e){"active"==e.state&&t.push(e.label)}))),console.warn("getPublishInfo:",t),t}},{key:"_getAuthInfo",value:function(e,t){var n=this;return new Promise((function(a,i){c.getAuthInfo(e,t).then((function(i){n._userId=i.userid,n._channel=e,n._userName=t,a(i)})).catch((function(e){i(e)}))}))}},{key:"_deleteUserMuteState",value:function(e){this._userMuteInfo[e]&&(this._userMuteInfo[e].isAudioMute=!1,this._userMuteInfo[e].isVideoMute=!1,delete this._userMuteInfo[e],this._deleteUserMuteState())}},{key:"_executeAutoMute",value:function(e){var t=this;this._userMuteInfo[e.userId]?e.streamConfigs.forEach((function(n){"sophon_audio"==n.label&&t._userMuteInfo[e.userId].isAudioMute!==n.muted&&(t._userMuteInfo[e.userId].isAudioMute=n.muted,t._callBack("onUserAudioMuted",{userId:e.userId,mute:n.muted}))})):(this._userMuteInfo[e.userId]={isAudioMute:!1,isVideoMute:!1},e.streamConfigs.forEach((function(n){"sophon_audio"==n.label&&(t._userMuteInfo[e.userId].isAudioMute=n.muted)})),this._userMuteInfo[e.userId].isAudioMute&&this._callBack("onUserAudioMuted",{userId:e.userId,mute:this._userMuteInfo[e.userId].isAudioMute}))}},{key:"_executeVideoMute",value:function(e){var t=this;this._userMuteInfo[e.userId]?e.streamConfigs.forEach((function(n){"sophon_video_camera_large"==n.label&&t._userMuteInfo[e.userId].isVideoMute!==n.muted&&(t._userMuteInfo[e.userId].isVideoMute=n.muted,t._callBack("onUserVideoMuted",{userId:e.userId,mute:n.muted}))})):(this._userMuteInfo[e.userId]={isAudioMute:!1,isVideoMute:!1},e.streamConfigs.forEach((function(n){"sophon_video_camera_large"==n.label&&(t._userMuteInfo[e.userId].isVideoMute=n.muted)})),this._userMuteInfo[e.userId].isVideoMute&&this._callBack("onUserVideoMuted",{userId:e.userId,mute:this._userMuteInfo[e.userId].isVideoMute}))}},{key:"_handleEvents",value:function(){var e=this;this._clinet.on("onJoin",(function(t){console.warn("onJoin",t),e._callBack&&e._callBack("onJoin",t)})),this._clinet.on("onPublisher",(function(t){console.warn("onPublisher",t),e._executeAutoSubscribe(t),e._callBack&&e._callBack("onPublisher",t)})),this._clinet.on("onUnPublisher",(function(t){console.warn("onUnPublisher",t),e._checkSubscribeState(t.userId),e._callBack&&e._callBack("onUnPublisher",t)})),this._clinet.on("onNotify",(function(t){console.warn("onNotify",t),t.forEach((function(t){e._userId!=t.userId&&(e._executeAutoMute(t),e._executeVideoMute(t))})),e._callBack&&e._callBack("onNotify",t)})),this._clinet.on("onUpdateRole",(function(t){console.warn(t),e._currentRole=t.newRole,0==e._currentRole?e.publish().then((function(t){e._callBack("onEnterSeatResult",0)})).catch((function(t){e._callBack("onEnterSeatResult",t)})):e._callBack("onLeaveSeatResult",0),e._callBack&&e._callBack("onUpdateRole",t)})),this._clinet.on("onError",(function(t){if(console.error("onError",t),e._callBack){try{switch(t.errorCode){case 10012:e._isScreenSharePreview=!1;break}}catch(t){}e._callBack("onError",t)}})),this._clinet.on("onBye",(function(t){console.warn("onBye",t),e._isInCall=!1,e._isPublish=!1,e.stopScreenSharePreview(),e._callBack&&e._callBack("onBye",t.code)})),this._clinet.on("onLeave",(function(t){console.warn("onLeave",t),e._callBack&&e._callBack("onLeave",t)}))}},{key:"_showErrorMsg",value:function(e){this._callBack&&this._callBack("onError",e),console.error(e)}}],[{key:"instance",get:function(){return e._instance||(e._instance=new e),e._instance}}]),e}()},e332:function(e,t,n){},e494:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-list"},[e._m(0),n("ul",{directives:[{name:"show",rawName:"v-show",value:0==e.showModel,expression:"showModel == 0"}],staticClass:"list-video"},[n("li",{staticClass:"li-my"},[n("div",{staticClass:"avatar avatar-name"},[e._v("\n        "+e._s(e.$store.state.data.userName)+"\n      ")]),n("video",{staticClass:"mirrorMode myUserId",attrs:{autoplay:"",id:e.$store.state.data.userId},on:{click:function(t){return e.switchScreen(e.myUserId)}}}),n("p",{staticClass:"name"},[e._v(e._s(e.$store.state.data.userName)+" ")])]),e._l(e.$store.state.data.userList,(function(t){return n("li",{key:t.userId},[n("hvideo",{attrs:{userInfo:t},on:{switchScreen:e.switchScreen}})],1)}))],2),n("ul",{directives:[{name:"show",rawName:"v-show",value:1==e.showModel,expression:"showModel == 1"}],staticClass:"list-txt"},[n("li",[n("p",{staticClass:"onlyname"},[e._v(e._s(e.$store.state.data.userName))])]),e._l(e.$store.state.data.userList,(function(t){return n("li",{key:t.userId},[n("p",{staticClass:"onlyname"},[e._v(e._s(t.displayName))])])}))],2)])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title"},[n("p",[e._v("Member List")])])}],r=n("a065"),u=(n("4cbe"),{data:function(){return{showModel:0,myUserId:null,count:0}},mounted:function(){this.$nextTick((function(){}))},methods:{switchScreen:function(e){var t=this,n=document.getElementById("localVideo").getAttribute("subUserId");this.myUserId=r["a"].instance.userId,this.$nextTick((function(){if(n){var a=n;r["a"].instance.subscribe(a).then((function(e){r["a"].instance.setDisplayRemoteVideo(a,document.getElementById(a),e)}))}e!=t.myUserId&&e!=n?(document.getElementById("localVideo").setAttribute("subUserId",e),r["a"].instance.subscribeLarge(e).then((function(t){setTimeout((function(){r["a"].instance.setDisplayRemoteVideo(e,document.getElementById("localVideo"),t)}),200)})).catch((function(e){console.log("error: ",e)})),hvuex({isSwitchScreen:!0})):e==t.myUserId&&(setTimeout((function(){t.$store.state.data.isPublishScreen?document.getElementById("localVideo").srcObject=r["a"].instance.screenStream:document.getElementById("localVideo").srcObject=AppConfig.localStream}),200),document.getElementById("localVideo").removeAttribute("subUserId"),hvuex({isSwitchScreen:!1}))}))}},watch:{"$store.state.data.switchUserId":function(e,t){e&&(this.switchScreen(e),hvuex({switchUserId:null}))},"$store.state.data.userList":function(e,t){if(JSON.stringify(e)!=JSON.stringify(t)){hvuex({guestName:e[0].displayName});var n=document.getElementById("localVideo").getAttribute("subUserId");n&&(r["a"].instance.getUserInfo(n)||(this.$store.state.data.isPublishScreen?(document.getElementById("localVideo").srcObject=r["a"].instance.screenStream,this.$store.state.data.isSwitchScreen&&(document.getElementById(r["a"].instance.userId).srcObject=AppConfig.localStream)):document.getElementById("localVideo").srcObject=AppConfig.localStream,document.getElementById("localVideo").removeAttribute("subUserId"),hvuex({isSwitchScreen:!1})))}}}}),c=u,o=(n("8ea7"),n("2877")),s=Object(o["a"])(c,a,i,!1,null,null,null);t["default"]=s.exports}});